<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sol LeWitt Reproduction with D3</title>
    <style>
        body {
            margin: 0;
            box-sizing: border-box;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
</head>
<body>
    <script type="module">
        // Canvas
        const width = innerWidth;
        const height = innerHeight; 

        // SVG
        const svg = d3.select("body").append("svg").attr("width", width).attr("height", height);
        
        // Rectangles
        const n = 100;
        
        svg
        .selectAll("rect")
        .data(d3.range(n))
        .join("rect")
        .attr('y', (d) => d * 20)
        .attr('width', width)
        .attr('height', 10)
        .attr('class', 'horizontal')
        .attr('mask', 'url(#circle-mask)')

        svg
        .selectAll("rect.vertical")
        .data(d3.range(n))
        .join("rect")
        .attr('x', (d) => d * 20)
        .attr('width', 10)
        .attr('height', height)
        .attr('class', 'vertical')
        .attr('mask', 'url(#circle-mask-2)')

        // Mask 1

        const mask = svg
        .append('mask')
        .attr('id', 'circle-mask')

        mask
        .append('rect')
        .attr('width', width)
        .attr('height', height)
        .attr('fill', 'black')

        mask
        .append('circle')
        .attr('cx', width / 2)
        .attr('cy', height / 2)
        .attr('r', 200)
        .attr('fill', 'white')

        // Mask 2

        const mask2 = svg
        .append('mask')
        .attr('id', 'circle-mask-2')

        mask2
        .append('rect')
        .attr('width', width)
        .attr('height', height)
        .attr('fill', 'white')

        mask2
        .append('circle')
        .attr('cx', width / 2)
        .attr('cy', height / 2)
        .attr('r', 200)
        .attr('fill', 'black')
    </script>
        
</body>
</html>